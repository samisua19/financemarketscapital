<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap4.min.css">
  <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
  <script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script>

</head>

<body>
  <div class="container" style="margin-top: 10px;">
    <div class="table-responsive">
      <table id="tableUsers" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
        <thead>
          <tr>
            <th class="th-sm">Nombre
            </th>
            <th class="th-sm">Apellido
            </th>
            <th class="th-sm"># Documento
            </th>
            <th class="th-sm">Patrocinador
            </th>
            <th class="th-sm">Novedad de pago
            </th>
            <th class="th-sm">Fecha Pago
            </th>
            <th class="th-sm"># Recibo
            </th>
          </tr>
        </thead>
        <tbody id="myTable">
        </tbody>
        <tfoot>
          <tr>
            <th>Nombre
            </th>
            <th>Apellido
            </th>
            <th># Documento
            </th>
            <th>Patrocinador
            </th>
            <th>Novedad de pago
            </th>
            <th>Fecha Pago
            </th>
            <th># Recibo
            </th>
          </tr>
        </tfoot>
      </table>
    </div>
    <div class="container" style="margin-top: 20px; margin-bottom: 40px;">
      <div class="row col-md-12 justify-content-center">
        <div class="card text-center">
          <div class="card-header">
            <h4>Perfil de Usuario</h4>
          </div>
          <div class="card-body">
            <form class="col-md-12" id="formUser">
              <div class="row " style="text-align: center;">
                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6">
                  <div class="input-group mb-3">
                    <span class="input-group-text" id="basic-addon3"
                      style="border-top-right-radius: 0px; border-bottom-right-radius: 0px;">Nombre Completo</span>
                    <input type="text" class="form-control" id="inputName" aria-describedby="basic-addon3"
                      value="Samuel David Suarez Rubiano" disabled>
                  </div>
                </div>
                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6">
                  <div class="input-group mb-3">
                    <span class="input-group-text" id="spanTipoDoc"
                      style="border-top-right-radius: 0px;  border-bottom-right-radius: 0px;">Cedula</span>
                    <input type="text" class="form-control" id="inputTipoDoc" aria-describedby="spanTipoDoc"
                      value="1096245017" disabled>
                  </div>
                </div>
              </div>
              <div class="row " style="text-align: center;">
                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6">
                  <div class="input-group mb-3">
                    <span class="input-group-text" id="basic-addon3"
                      style="border-top-right-radius: 0px; border-bottom-right-radius: 0px;">Representante</span>
                    <input type="text" class="form-control" id="inputRepresentante" aria-describedby="basic-addon3"
                      value="Pablo Prada" disabled>
                  </div>
                </div>
                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6">
                  <div class="input-group mb-3">
                    <span class="input-group-text" id="basic-addon3"
                      style="border-top-right-radius: 0px;  border-bottom-right-radius: 0px;">Correo Electronico</span>
                    <input type="text" class="form-control" id="inputEmail" aria-describedby="basic-addon3"
                      value="samisua16@gmail.com" disabled>
                  </div>
                </div>
              </div>
              <div class="row " style="text-align: center;">
                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6">
                  <div class="input-group mb-3">
                    <span class="input-group-text" id="basic-addon3"
                      style="border-top-right-radius: 0px; border-bottom-right-radius: 0px;">Fecha Registro</span>
                    <input type="text" class="form-control" id="inputDateRegister" aria-describedby="basic-addon3"
                      value="28/10/1997" disabled>
                  </div>
                </div>
                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6">
                  <div class="input-group mb-3">
                    <span class="input-group-text" id="basic-addon3"
                      style="border-top-right-radius: 0px;  border-bottom-right-radius: 0px;">NÃºmero</span>
                    <input type="text" class="form-control" id="inputNumber" aria-describedby="basic-addon3"
                      value="3043398810" disabled>
                  </div>
                </div>
              </div>
              <div class="table-responsive">
                <table id="tablePlanes" class="table table-striped table-bordered table-sm" cellspacing="0"
                  width="100%">
                  <thead>
                    <tr>
                      <th class="th-sm">Plazo
                      </th>
                      <th class="th-sm">Plan
                      </th>
                      <th class="th-sm">Fecha compra
                      </th>
                    </tr>
                  </thead>
                  <tbody id="myTable">
                    <tr>
                      <td>Largo Plazo
                      </td>
                      <td>Plan Sauce
                      </td>
                      <td>28/10/2020
                      </td>
                    </tr>
                    <tr>
                      <td>Corto Plazo
                      </td>
                      <td>Plan semilla 1'000.000
                      </td>
                      <td>28/10/2020
                      </td>
                    </tr>
                  </tbody>
                  <tr>
                    <th>Plazo
                    </th>
                    <th>Plan
                    </th>
                    <th>Fecha compra
                    </th>
                  </tr>
                  <tfoot>
                  </tfoot>
                </table>
              </div>
              <div class="row justify-content-center" style="margin-top: 20px;">
                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-12">
                  <div class="btn-group me-2 " role="group" aria-label="Second group">
                    <button type="button" class="btn btn-secondary">Documento</button>
                    <button type="button" class="btn btn-secondary">Respaldo</button>
                    <button type="button" class="btn btn-secondary">Selfie</button>
                    <button type="button" class="btn btn-secondary">Recibo Casa</button>
                    <button type="button" class="btn btn-secondary">Recibo Pago</button>
                  </div>
                </div>
              </div>
              <div class="row justify-content-center" style="margin-top: 20px;">
                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-12">
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1">
                    <label class="form-check-label" for="flexRadioDefault1">
                      Usuario
                    </label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault2" checked>
                    <label class="form-check-label" for="flexRadioDefault2">
                      Inversionista
                    </label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault2" checked>
                    <label class="form-check-label" for="flexRadioDefault2">
                      Representante
                    </label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault2" checked>
                    <label class="form-check-label" for="flexRadioDefault2">
                      Financiero
                    </label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault2" checked>
                    <label class="form-check-label" for="flexRadioDefault2">
                      Juridico
                    </label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault2" checked>
                    <label class="form-check-label" for="flexRadioDefault2">
                      Comercial
                    </label>
                  </div>
                </div>
              </div>
              <div class="row justify-content-center" style="margin-top: 20px;">
                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-12">
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1">
                    <label class="form-check-label" for="flexRadioDefault1">
                      Activado
                    </label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault2" checked>
                    <label class="form-check-label" for="flexRadioDefault2">
                      Desactivado
                    </label>
                  </div>
                </div>
              </div>
            </form>
          </div>
          <div class="card-footer text-muted">
          </div>
        </div>
      </div>
    </div>

  </div>
  </div>
</body>
<script src="https://www.gstatic.com/firebasejs/8.0.2/firebase-app.js"></script>

<script src="https://www.gstatic.com/firebasejs/8.0.2/firebase-analytics.js"></script>

<script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-firestore.js"></script>

<script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-storage.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.16/vue.min.js">
</script>
<script>
  var firebaseConfig = {
    apiKey: "AIzaSyCPvLMdAYWqdYLAZK28AbBa56mIAo1JkxU",
    authDomain: "appfinancemarketscapital.firebaseapp.com",
    databaseURL: "https://appfinancemarketscapital.firebaseio.com",
    projectId: "appfinancemarketscapital",
    storageBucket: "gs://appfinancemarketscapital.appspot.com",
    messagingSenderId: "327823603780",
    appId: "1:327823603780:web:506199709abac99322a411",
    measurementId: "G-3V5TM2M89C"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();

  const db = firebase.firestore();
  const dbStorage = firebase.storage().ref();

  $(document).ready(function () {
    //tableData.DataTable();
    setTimeout(function () { getUsers(); }, 3000)
    $('#tablePlanes').DataTable();

    //
  });

  const consultContainer = document.getElementById('myTable');
  const tableData = document.getElementById('tableUsers');
  const btnPrueba = document.getElementById('btnPrueba');
  const onGetUsers = (callback) => db.collection("Users").orderBy("fechaRegistro", "desc").onSnapshot(callback);

  function getUsers() {
    onGetUsers((querySnapshot) => {
      consultContainer.innerHTML = '';
      querySnapshot.forEach(doc => {
        let data = doc.data();
        let datos;
        if (data['estado']) {
          db.collection("PlanesUsuarios").where('numerodocumento', "==", data['numerodocumento'])
            .get()
            .then(function (querySnapshot) {
              querySnapshot.forEach(function (dat) {
                datos = dat.data();
              });
            })
            .catch(function (error) {
              console.log("Error getting documents: ", error);
            });
          setTimeout(function () {
            consultContainer.innerHTML += '<tr> <td>' + data['nombre'] + '</td><td>' + data['apellido'] + '</td><td>' + data['numerodocumento'] + '</td><td>' + data['patrocinador'] + '</td><td>' + datos['estadoPago'] + '</td><td>' + datos['fechaPago'] + '</td><td>' + datos['recibo'] + '</td> </tr>';
          }, 1000);
        }
      });
      setTimeout(function () {
        $('#tableUsers').DataTable();
      }, 1500);
    });
  }






</script>



</html>