<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
        crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <style>
        div.input-group-prepend {
            height: 34px;
            font-size: 15px;
        }

        input.form-control,
        select.custom-select {
            font-size: 18px;
            height: 40px;
        }

        label.input-group-text,
        span.input-group-text,
        .btn {
            height: 40px;
            ;
            font-size: 18px;
        }

        .invoiceBox>input {
            display: none;
        }

        .invoiceBox label {
            display: block;
        }

        .boxFile {
            display: inline-block;
            width: 100%;
            border: 1px solid grey;
            background: #fff;
            color: grey;
            padding: 10px;
            text-align: center;
            font-weight: 500;
            font-size: 14px;
            -webkit-transition: all 0.3s;
            transition: all 0.3s;
        }

        .boxFile:hover {
            cursor: pointer;
            background: grey;
            color: #fff;
        }

        .boxFile i {
            display: block;
            font-size: 26px;
            margin-bottom: 5px;
        }

        .attached,
        .attached:hover,
        .attached:focus {
            background: green;
            color: #fff;
            border: 1px solid green;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="row col-md-12">
            <div class="col" style="text-align: center; margin: 10px;">
                <h1>Bienvenido a Finance Markets Capital</h1>
            </div>
        </div>
        <div class="row col-md-12">
            <div class="col" style="text-align: center; margin: 10px;">
                <p>Su tranquilidad es nuestra prioridad. <br>
                    Contamos con la autorización de la principales autoridades reguladoras en Colombia. <br>
                    Valoramos y respetamos su privacidad. <br>
                    Sus fondos están seguros en bancos que cuentan con una gran reputación. <br>
                    <strong>Por favor llene todos los campos que aparecen a continuación:</strong> </p>
            </div>
        </div>
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <a class="nav-link active" id="formRegister-tab" data-toggle="tab" href="#formRegister" role="tab"
                    aria-controls="formRegister" aria-selected="true">Formulario de Registro</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="uploadfileLink-tab" data-toggle="tab" href="#uploadfileLink" role="tab"
                    aria-controls="uploadfileLink" aria-selected="false">Subir Archivo</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="contact-tab" data-toggle="tab" href="#contact" role="tab"
                    aria-controls="contact" aria-selected="false">Contactanos</a>
            </li>
        </ul>
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="formRegister" role="tabpanel" aria-labelledby="formRegister-tab">
                <div class="container">
                    <div class="row justify-content-center ">
                        <div class="row">
                            <div class="col">
                                <h3>Formulario de Registro</h3>
                            </div>
                        </div>
                        <form id="registerForm" class="col-md-12">
                            <!--Banner de errores-->
                            <div class="row">
                                <div class="col col-md-12 col-12 col-sm-12">
                                    <div class="row justify-content-center" id="errors" style="display: none;">
                                        <div class="alert alert-warning alert-dismissible fade show" role="alert">
                                            <div id="error"></div>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--Usuario y patrocinador-->
                            <div class="row ">
                                <div class="col  col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6">
                                    <div class="input-group mb-3">
                                        <input type="text" class="form-control user " placeholder="Usuario"
                                            aria-label="User" aria-describedby="btnUserCheck" id="inputUser" required>
                                        <div class="input-group-append">
                                            <button class="btn btn-outline-secondary" type="button" id="btnUserCheck"
                                                style=" border-bottom-right-radius: 10px; border-top-right-radius: 3px ; border: 1px solid #EED2CD;">Verificar</button>
                                        </div>
                                        <!--
                                        <small class="form-text text-muted">Debe tener al menos 10 caracteres, de los cuales al menos uno debe ser un número.</small>
                                        -->
                                        <div class="user" style="height: 10px;"></div>
                                    </div>
                                </div>
                                <div class="col  col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6">
                                    <div class="input-group mb-3">
                                        <select class="custom-select" id="selectRepresentante" required>
                                            <option value="">Representante</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <!--Nombres y Apellidos-->
                            <div class="row">
                                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6">
                                    <div class="input-group mb-3">
                                        <input type="text" class="form-control" placeholder="Nombres" id="inputName"
                                            required>
                                    </div>

                                </div>
                                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6">
                                    <div class="input-group mb-3">
                                        <input type="text" class="form-control" placeholder="Apellidos"
                                            id="inputLastName" required>
                                    </div>
                                </div>
                            </div>
                            <!--Tipo y numero de documento-->
                            <div class="row">
                                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6">
                                    <div class="input-group mb-3">
                                        <div class="input-group-prepend">
                                            <label class="input-group-text" for="inputGroupTDocumento">Tipo
                                                Documento</label>
                                        </div>
                                        <select class="custom-select" id="inputGroupTDocumento" required>
                                            <option value="">Escoger...</option>
                                            <option value="Cédula de Ciudadanía">Cédula de Ciudadanía</option>
                                            <option value="Cédula de Extranjería">Cédula de Extranjería</option>
                                            <option value="NIT">NIT</option>
                                            <option value="Pasaporte">Pasaporte</option>
                                            <option value="Tarjeta de seguro social extranjero">Tarjeta de seguro social
                                                extranjero
                                            </option>
                                            <option value="Sociedad Extrangera sin nit en Colombia">Sociedad Extrangera
                                                sin nit en
                                                Colombia</option>
                                            <option value="Fideicomiso">Fideicomiso</option>
                                            <option value="RIF Venezuela">RIF Venezuela</option>
                                            <option value="NIT Extranjería">NIT Extranjería</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6">
                                    <div class="input-group mb-3">
                                        <input type="text" placeholder="Numero de Documento" class="form-control"
                                            id="inputNumDocumento" required>
                                    </div>
                                </div>
                            </div>
                            <!--Fecha de nacimiento y genero-->
                            <div class="row ">
                                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6">
                                    <div class="input-group mb-3">
                                        <label><strong>Fecha de Nacimiento:</strong> </label>
                                        <div class="col-lg-2" style="margin-bottom: 10px;" style="margin-bottom: 10px;">
                                            <select class="custom-select" id="inputDay" required>
                                                <option value="">Dia</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                                <option value="6">6</option>
                                                <option value="7">7</option>
                                                <option value="8">8</option>
                                                <option value="9">9</option>
                                                <option value="10">10</option>
                                                <option value="11">11</option>
                                                <option value="12">12</option>
                                                <option value="13">13</option>
                                                <option value="14">14</option>
                                                <option value="15">15</option>
                                                <option value="16">16</option>
                                                <option value="17">17</option>
                                                <option value="18">18</option>
                                                <option value="19">19</option>
                                                <option value="20">20</option>
                                                <option value="21">21</option>
                                                <option value="23">23</option>
                                                <option value="24">24</option>
                                                <option value="25">25</option>
                                                <option value="26">26</option>
                                                <option value="27">27</option>
                                                <option value="28">28</option>
                                                <option value="29">29</option>
                                                <option value="30">30</option>
                                                <option value="31">31</option>
                                            </select>
                                        </div>
                                        <div class="col-lg-2" style="margin-bottom: 10px;">
                                            <select class="custom-select" id="inputMes" required>
                                                <option value="">Mes</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                                <option value="6">6</option>
                                                <option value="7">7</option>
                                                <option value="8">8</option>
                                                <option value="9">9</option>
                                                <option value="10">10</option>
                                                <option value="11">11</option>
                                                <option value="12">12</option>
                                            </select>
                                        </div>
                                        <div class=" col-lg-3" style="margin-bottom: 10px;">
                                            <input type="text" name="inputYear" id="inputYear" class="form-control"
                                                placeholder="AAAA" maxlength="4">
                                        </div>
                                    </div>
                                </div>
                                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6">
                                    <div class="input-group mb-3">
                                        <div class="input-group-prepend">
                                            <label class="input-group-text" for="inputGroupGender">Genero</label>
                                        </div>
                                        <select class="custom-select" id="inputGroupGender" required>
                                            <option value="">Escoger...</option>
                                            <option value="Hombre">Hombre</option>
                                            <option value="Mujer">Mujer</option>
                                            <option value="Otro">Otro</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <!--Correo electronico y token-->
                            <div class="row">
                                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6">
                                    <div class="input-group mb-3" id="app">
                                        <input type="email" class="form-control" placeholder="Correo Electrónico"
                                            aria-label="Email" aria-describedby="btnSubmitEmail" id="inputEmail"
                                            v-model="from_email" required>
                                        <div class="input-group-append">
                                            <button class="btn btn-outline-secondary" type="button" id="btnSubmitEmail"
                                                @click="enviar"
                                                style=" border-bottom-right-radius: 3px; border-top-right-radius: 3px ; border: 1px solid #EED2CD;">Pedir
                                                Token</button>
                                        </div>
                                        <div></div>
                                    </div>
                                </div>
                                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6">
                                    <div class="input-group mb-3">
                                        <input type="text" class="form-control"
                                            placeholder="Escriba el TOKEN recibido en el correo                            "
                                            aria-label="Verify Email" aria-describedby="btnVerifyEmail"
                                            id="inputVerifyEmail" required>
                                        <div class="input-group-append">
                                            <button class="btn btn-outline-secondary" type="button" id="btnVerifyEmail"
                                                style=" border-bottom-right-radius: 3px; border-top-right-radius: 3px ; border: 1px solid #EED2CD;">Verificar</button>
                                        </div>
                                        <div></div>
                                    </div>
                                </div>
                            </div>
                            <!--Contraseña y confirmar contraseña-->
                            <div class="row">
                                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6">
                                    <div class="input-group mb-3">
                                        <input type="password" class="form-control" placeholder="Escriba una Contraseña fuerte
                                    " id="inputPassword" minlength="8" required>
                                    </div>
                                    <small class="form-text text-muted">Su contraseña debe ser de 8 caracteres o más,
                                        contener
                                        mayúsculas y números.</small>
                                </div>
                                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6">
                                    <div class="input-group mb-3">
                                        <input type="password" class="form-control" placeholder="Confirme su Contraseña"
                                            id="inputConfirmPassword" minlength="8" required>
                                    </div>
                                </div>
                            </div>
                            <!--Departamento y ciudad-->
                            <div class="row">
                                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6">
                                    <div class="input-group mb-3">
                                        <select class="custom-select" id="inputState" required>
                                            <option value="">Departamento</option>
                                            <option value="Amazonas">Amazonas</option>
                                            <option value="Antioquia">Antioquía</option>
                                            <option value="Arauca">Arauca</option>
                                            <option value="Archipiélago de San Andrés, Providencia y Santa Catalina">Archipiélago de San Andrés, Providencia y Santa Catalina</option>
                                            <option value="Atlántico">Atlántico</option>
                                            <option value="Bogotá D.C.">Bogotá D.C.</option>
                                            <option value="Bolívar">Bolívar</option>
                                            <option value="Boyacá">Boyacá</option>
                                            <option value="Caldas">Caldas</option>
                                            <option value="Caquetá">Caquetá</option>
                                            <option value="Casanare">Casanare</option>
                                            <option value="Cauca">Cauca</option>
                                            <option value="Cesar">Cesar</option>
                                            <option value="Chocó">Chocó</option>
                                            <option value="Córdoba">Córdoba</option>
                                            <option value="Cundinamarca">Cundinamarca</option>
                                            <option value="Guainía">Guainía</option>
                                            <option value="Huila">Huila</option>
                                            <option value="La Guajira">La Guajira</option>
                                            <option value="Magdalena">Magdalena</option>
                                            <option value="Meta">Meta</option>
                                            <option value="Nariño">Nariño</option>
                                            <option value="Norte de Santander">Norte de Santander</option>
                                            <option value="Putumayo">Putumayo</option>
                                            <option value="Quindío">Quindío</option>
                                            <option value="Risaralda">Risaralda</option>
                                            <option value="Santander">Santander</option>
                                            <option value="Sucre">Sucre</option>
                                            <option value="Tolima">Tolima</option>
                                            <option value="Valle del Cauca">Valle del Cauca</option>
                                            <option value="Vaupés">Vaupés</option>
                                            <option value="Vichada">Vichada</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6">
                                    <div class="input-group mb-3">
                                        <select class="custom-select" id="inputCity" required>
                                            <option value="">Ciudad</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <!--Direccion y numero celular-->
                            <div class="row">
                                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6">
                                    <div class="input-group mb-3">
                                        <input type="text" placeholder="Dirección" class="form-control"
                                            id="inputDireccion" required>

                                    </div>
                                </div>
                                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6">
                                    <div class="input-group mb-3">
                                        <input type="text" placeholder="Número con Whatsapp" class="form-control"
                                            id="inputNumber" required>
                                    </div>
                                </div>
                            </div>
                            <!--imagen frontal y respaldo de cedula-->
                            <div class="row ">
                                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6 "
                                    style="margin-top: 5px; margin-bottom: 5px;">
                                    <div class="input-group mb-3">
                                        <div class="custom-file justify-content-center">
                                            <div class="invoiceBox">
                                                <label for="imageCedula">
                                                    <div class="boxFile cedula" data-text="Seleccionar archivo"
                                                        style="width: 350px;">
                                                        Seleccionar la imagen de la Cédula.
                                                    </div>
                                                </label>
                                                <input id="imageCedula" multiple="" name="invoice[]" size="6000"
                                                    type="file"
                                                    accept="application/pdf,image/x-png,image/gif,image/jpeg,image/jpg,image/tiff">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6"
                                    style="margin-top: 5px; margin-bottom: 5px;">
                                    <div class="input-group mb-3" style="margin-bottom: 10px;">
                                        <div class="custom-file justify-content-center">
                                            <div class="invoiceBox">
                                                <label for="imageRespaldoCedula">
                                                    <div class="boxFile RCedula" data-text="Seleccionar archivo"
                                                        style="width: 350px;">
                                                        Seleccionar la imagen del respaldo de la Cédula
                                                    </div>
                                                </label>
                                                <input id="imageRespaldoCedula" multiple="" name="invoice[]" size="6000"
                                                    type="file"
                                                    accept="application/pdf,image/x-png,image/gif,image/jpeg,image/jpg,image/tiff">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <!--selfie y foto del recibo donde vive-->
                            <div class="row">
                                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6 "
                                    style="margin-top: 5px; margin-bottom: 5px;">
                                    <div class="input-group mb-3 " style="margin-bottom: 10px;">
                                        <div class="custom-file justify-content-center" lang="es">
                                            <div class="invoiceBox ">
                                                <label for="imageSelfiDocumento">
                                                    <div class="boxFile selfie" data-text="Seleccionar archivo"
                                                        style="width: 350px;">
                                                        Seleccionar la imagen de selfie con su Documento
                                                    </div>
                                                </label>
                                                <input id="imageSelfiDocumento" multiple="" name="invoice[]" size="6000"
                                                    type="file"
                                                    accept="application/pdf,image/x-png,image/gif,image/jpeg,image/jpg,image/tiff">
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6"
                                    style="margin-top: 5px; margin-bottom: 5px;">
                                    <div class="input-group mb-3" style="margin-bottom: 10px;">
                                        <div class="custom-file justify-content-center">
                                            <div class="invoiceBox ">
                                                <label for="imageRecibo">
                                                    <div class="boxFile recibo" data-text="Seleccionar archivo"
                                                        style="width: 350px;">
                                                        Seleccionar la imagen del recibo donde vive
                                                    </div>
                                                </label>
                                                <input id="imageRecibo" multiple="" name="invoice[]" size="6000"
                                                    type="file" accept="image/jpeg,image/jpg">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--Entidad financiera-->
                            <div class="row">
                                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6">
                                    <div class="input-group mb-3 justify-content-center">
                                        <label for="" class=""><strong>Entidad financiera donde desea recibir sus
                                                pagos:</strong>
                                        </label>

                                    </div>
                                </div>
                                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6">
                                    <div class="input-group mb-3">
                                        <input type="text" placeholder="Nombre de la entidad" class="form-control"
                                            id="inputNomEntidad" required>

                                    </div>
                                </div>
                            </div>
                            <!--Tipo y numero de cuenta-->
                            <div class="row">
                                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6">
                                    <div class="input-group mb-3">
                                        <div class="input-group-prepend">
                                            <label class="input-group-text" for="inputGroupTCuenta">Tipo Cuenta</label>
                                        </div>
                                        <select class="custom-select" id="inputGroupTCuenta" required>
                                            <option value="">Escoger...</option>
                                            <option value="Ahorros">Ahorros</option>
                                            <option value="Corriente">Corriente</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6">
                                    <div class="input-group mb-3">
                                        <input type="text" placeholder="Numero de Cuenta" class="form-control"
                                            id="inputNumCuenta" required>

                                    </div>
                                </div>
                            </div>
                            <!--Plazo y plan adquirido-->
                            <div class="row">
                                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6">
                                    <div class="input-group mb-3">
                                        <div class="input-group-prepend">
                                            <label class="input-group-text" for="inputGroupPlazo">Plazo</label>
                                        </div>
                                        <select class="custom-select" id="inputGroupPlazo" required>
                                            <option value="">Escoger...</option>
                                            <option value="Corto Plazo">Corto Plazo</option>
                                            <option value="Mediano Plazo">Mediano Plazo</option>
                                            <option value="Largo Plazo">Largo Plazo</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-6">
                                    <div class="input-group mb-3">
                                        <div class="input-group-prepend">
                                            <label class="input-group-text" for="inputGroupPlan">Plan</label>
                                        </div>
                                        <select class="custom-select" id="inputGroupPlan" required>
                                            <option selected>Escoger...</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <!--Aqui se genera el banner y el boton de pago-->
                            <div id="btnPago">
                            </div>
                            <!--Checkbox-->
                            <div class="row">
                                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-4">
                                    <div class="custom-control custom-checkbox">
                                        <input type="checkbox" class="custom-control-input" id="customCheckTYC"
                                            required>
                                        <label class="custom-control-label" for="customCheckTYC">Confirmo que acepto los
                                            Términos y
                                            Condiciones del contrato
                                        </label>
                                    </div>
                                </div>
                                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-4">
                                    <div class="custom-control custom-checkbox">
                                        <input type="checkbox" class="custom-control-input" id="customCheckAuthData"
                                            required>
                                        <label class="custom-control-label" for="customCheckAuthData">Autorizo el uso y
                                            tratamiento
                                            de mis datos personales
                                        </label>
                                    </div>
                                </div>
                                <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-4">
                                    <div class="custom-control custom-checkbox">
                                        <input type="checkbox" class="custom-control-input" id="customCheckPP" required>
                                        <label class="custom-control-label" for="customCheckPP">Confirmo que acepto la
                                            política de
                                            privacidad
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <br>
                            <!--Boton-->
                            <div class="row justify-content-center">
                                <button class="btn btn-primary btn-lg" id="btnSubmit" type="submit">Enviar</button>
                            </div>

                            <button class="btn btn-primary btn-lg" id="btnPrueba" type="button"
                                style="display: none;">Prueba</button>
                            <input type="text" id="inputExistData" style="display: none;" disabled>
                            <div class="row justify-content-center">

                            </div>
                        </form>

                        <div class="row justify-content-center btnPago" style=" display:none; margin-top: 30px; ">
                            <form>
                                <div class="alert alert-primary" role="alert">
                                    Si deseas realizar tu pago a través de ePayco, presiona el siguiente botón.
                                </div>
                                <script src='https://checkout.epayco.co/checkout.js'
                                    data-epayco-key='7489c917b92e42864673157635bd7673' class='epayco-button'
                                    data-epayco-amount='10000' data-epayco-tax='0' data-epayco-tax-base='5000'
                                    data-epayco-name='Plan semilla 1M' data-epayco-description='Plan semilla 1M'
                                    data-epayco-currency='cop' data-epayco-country='CO' data-epayco-test='true'
                                    data-epayco-external='false'
                                    data-epayco-response='http://127.0.0.1:5500/financemarketscapital/index.html'
                                    data-epayco-confirmation='http://127.0.0.1:5500/financemarketscapital/index.html'
                                    data-epayco-button='https://369969691f476073508a-60bf0867add971908d4f26a64519c2aa.ssl.cf5.rackcdn.com/btns/btn1.png'>
                                    </script>
                            </form> <!-- ================================================================== -->
                        </div>
                        <div class="row justify-content-center btnPago" style=" display: none; margin-top: 30px; ">
                            <form>
                                <div class="alert alert-primary" role="alert">
                                    Si deseas realizar tu pago a través de ePayco, presiona el siguiente botón.
                                </div>
                                <script src='https://checkout.epayco.co/checkout.js'
                                    data-epayco-key='7489c917b92e42864673157635bd7673' class='epayco-button'
                                    data-epayco-amount='10000' data-epayco-tax='0' data-epayco-tax-base='5000'
                                    data-epayco-name='Plan semilla 1M' data-epayco-description='Plan semilla 1M'
                                    data-epayco-currency='cop' data-epayco-country='CO' data-epayco-test='true'
                                    data-epayco-external='false'
                                    data-epayco-response='http://127.0.0.1:5500/financemarketscapital/index.html'
                                    data-epayco-confirmation='http://127.0.0.1:5500/financemarketscapital/index.html'
                                    data-epayco-button='https://369969691f476073508a-60bf0867add971908d4f26a64519c2aa.ssl.cf5.rackcdn.com/btns/btn1.png'>
                                    </script>
                            </form> <!-- ================================================================== -->
                        </div>
                        <div class="row justify-content-center btnPago" style=" display: none; margin-top: 30px; ">
                            <form>
                                <div class="alert alert-primary" role="alert">
                                    Si deseas realizar tu pago a través de ePayco, presiona el siguiente botón.
                                </div>
                                <script src='https://checkout.epayco.co/checkout.js'
                                    data-epayco-key='7489c917b92e42864673157635bd7673' class='epayco-button'
                                    data-epayco-amount='10000' data-epayco-tax='0' data-epayco-tax-base='5000'
                                    data-epayco-name='Plan semilla 1M' data-epayco-description='Plan semilla 1M'
                                    data-epayco-currency='cop' data-epayco-country='CO' data-epayco-test='true'
                                    data-epayco-external='false'
                                    data-epayco-response='http://127.0.0.1:5500/financemarketscapital/index.html'
                                    data-epayco-confirmation='http://127.0.0.1:5500/financemarketscapital/index.html'
                                    data-epayco-button='https://369969691f476073508a-60bf0867add971908d4f26a64519c2aa.ssl.cf5.rackcdn.com/btns/btn1.png'>
                                    </script>
                            </form> <!-- ================================================================== -->
                        </div>
                        <div class="row justify-content-center btnPago" style=" display: none; margin-top: 30px; ">
                            <form>
                                <div class="alert alert-primary" role="alert">
                                    Si deseas realizar tu pago a través de ePayco, presiona el siguiente botón.
                                </div>
                                <script src='https://checkout.epayco.co/checkout.js'
                                    data-epayco-key='7489c917b92e42864673157635bd7673' class='epayco-button'
                                    data-epayco-amount='10000' data-epayco-tax='0' data-epayco-tax-base='5000'
                                    data-epayco-name='Plan semilla 1M' data-epayco-description='Plan semilla 1M'
                                    data-epayco-currency='cop' data-epayco-country='CO' data-epayco-test='true'
                                    data-epayco-external='false'
                                    data-epayco-response='http://127.0.0.1:5500/financemarketscapital/index.html'
                                    data-epayco-confirmation='http://127.0.0.1:5500/financemarketscapital/index.html'
                                    data-epayco-button='https://369969691f476073508a-60bf0867add971908d4f26a64519c2aa.ssl.cf5.rackcdn.com/btns/btn1.png'>
                                    </script>
                            </form> <!-- ================================================================== -->
                        </div>
                        <div class="row justify-content-center btnPago" style=" display: none; margin-top: 30px; ">
                            <form>
                                <div class="alert alert-primary" role="alert">
                                    Si deseas realizar tu pago a través de ePayco, presiona el siguiente botón.
                                </div>
                                <script src='https://checkout.epayco.co/checkout.js'
                                    data-epayco-key='7489c917b92e42864673157635bd7673' class='epayco-button'
                                    data-epayco-amount='10000' data-epayco-tax='0' data-epayco-tax-base='5000'
                                    data-epayco-name='Plan semilla 1M' data-epayco-description='Plan semilla 1M'
                                    data-epayco-currency='cop' data-epayco-country='CO' data-epayco-test='true'
                                    data-epayco-external='false'
                                    data-epayco-response='http://127.0.0.1:5500/financemarketscapital/index.html'
                                    data-epayco-confirmation='http://127.0.0.1:5500/financemarketscapital/index.html'
                                    data-epayco-button='https://369969691f476073508a-60bf0867add971908d4f26a64519c2aa.ssl.cf5.rackcdn.com/btns/btn1.png'>
                                    </script>
                            </form> <!-- ================================================================== -->
                        </div>
                        <div class="row justify-content-center btnPago" style=" display: none; margin-top: 30px; ">
                            <form>
                                <div class="alert alert-primary" role="alert">
                                    Si deseas realizar tu pago a través de ePayco, presiona el siguiente botón.
                                </div>
                                <script src='https://checkout.epayco.co/checkout.js'
                                    data-epayco-key='7489c917b92e42864673157635bd7673' class='epayco-button'
                                    data-epayco-amount='10000' data-epayco-tax='0' data-epayco-tax-base='5000'
                                    data-epayco-name='Plan semilla 1M' data-epayco-description='Plan semilla 1M'
                                    data-epayco-currency='cop' data-epayco-country='CO' data-epayco-test='true'
                                    data-epayco-external='false'
                                    data-epayco-response='http://127.0.0.1:5500/financemarketscapital/index.html'
                                    data-epayco-confirmation='http://127.0.0.1:5500/financemarketscapital/index.html'
                                    data-epayco-button='https://369969691f476073508a-60bf0867add971908d4f26a64519c2aa.ssl.cf5.rackcdn.com/btns/btn1.png'>
                                    </script>
                            </form> <!-- ================================================================== -->
                        </div>
                        <div class="row justify-content-center btnPago" style=" display: none; margin-top: 30px; ">
                            <form>
                                <div class="alert alert-primary" role="alert">
                                    Si deseas realizar tu pago a través de ePayco, presiona el siguiente botón.
                                </div>
                                <script src='https://checkout.epayco.co/checkout.js'
                                    data-epayco-key='7489c917b92e42864673157635bd7673' class='epayco-button'
                                    data-epayco-amount='10000' data-epayco-tax='0' data-epayco-tax-base='5000'
                                    data-epayco-name='Plan semilla 1M' data-epayco-description='Plan semilla 1M'
                                    data-epayco-currency='cop' data-epayco-country='CO' data-epayco-test='true'
                                    data-epayco-external='false'
                                    data-epayco-response='http://127.0.0.1:5500/financemarketscapital/index.html'
                                    data-epayco-confirmation='http://127.0.0.1:5500/financemarketscapital/index.html'
                                    data-epayco-button='https://369969691f476073508a-60bf0867add971908d4f26a64519c2aa.ssl.cf5.rackcdn.com/btns/btn1.png'>
                                    </script>
                            </form> <!-- ================================================================== -->
                        </div>
                        <div class="row justify-content-center btnPago" style=" display: none; margin-top: 30px; ">
                            <form>
                                <div class="alert alert-primary" role="alert">
                                    Si deseas realizar tu pago a través de ePayco, presiona el siguiente botón.
                                </div>
                                <script src='https://checkout.epayco.co/checkout.js'
                                    data-epayco-key='7489c917b92e42864673157635bd7673' class='epayco-button'
                                    data-epayco-amount='10000' data-epayco-tax='0' data-epayco-tax-base='5000'
                                    data-epayco-name='Plan semilla 1M' data-epayco-description='Plan semilla 1M'
                                    data-epayco-currency='cop' data-epayco-country='CO' data-epayco-test='true'
                                    data-epayco-external='false'
                                    data-epayco-response='http://127.0.0.1:5500/financemarketscapital/index.html'
                                    data-epayco-confirmation='http://127.0.0.1:5500/financemarketscapital/index.html'
                                    data-epayco-button='https://369969691f476073508a-60bf0867add971908d4f26a64519c2aa.ssl.cf5.rackcdn.com/btns/btn1.png'>
                                    </script>
                            </form> <!-- ================================================================== -->
                        </div>
                        <div class="row justify-content-center btnPago" style=" display: none; margin-top: 30px; ">
                            <form>
                                <div class="alert alert-primary" role="alert">
                                    Si deseas realizar tu pago a través de ePayco, presiona el siguiente botón.
                                </div>
                                <script src='https://checkout.epayco.co/checkout.js'
                                    data-epayco-key='7489c917b92e42864673157635bd7673' class='epayco-button'
                                    data-epayco-amount='10000' data-epayco-tax='0' data-epayco-tax-base='5000'
                                    data-epayco-name='Plan semilla 1M' data-epayco-description='Plan semilla 1M'
                                    data-epayco-currency='cop' data-epayco-country='CO' data-epayco-test='true'
                                    data-epayco-external='false'
                                    data-epayco-response='http://127.0.0.1:5500/financemarketscapital/index.html'
                                    data-epayco-confirmation='http://127.0.0.1:5500/financemarketscapital/index.html'
                                    data-epayco-button='https://369969691f476073508a-60bf0867add971908d4f26a64519c2aa.ssl.cf5.rackcdn.com/btns/btn1.png'>
                                    </script>
                            </form> <!-- ================================================================== -->
                        </div>
                        <div class="row justify-content-center btnPago" style=" display: none; margin-top: 30px; ">
                            <form>
                                <div class="alert alert-primary" role="alert">
                                    Si deseas realizar tu pago a través de ePayco, presiona el siguiente botón.
                                </div>
                                <script src='https://checkout.epayco.co/checkout.js'
                                    data-epayco-key='7489c917b92e42864673157635bd7673' class='epayco-button'
                                    data-epayco-amount='10000' data-epayco-tax='0' data-epayco-tax-base='5000'
                                    data-epayco-name='Plan semilla 1M' data-epayco-description='Plan semilla 1M'
                                    data-epayco-currency='cop' data-epayco-country='CO' data-epayco-test='true'
                                    data-epayco-external='false'
                                    data-epayco-response='http://127.0.0.1:5500/financemarketscapital/index.html'
                                    data-epayco-confirmation='http://127.0.0.1:5500/financemarketscapital/index.html'
                                    data-epayco-button='https://369969691f476073508a-60bf0867add971908d4f26a64519c2aa.ssl.cf5.rackcdn.com/btns/btn1.png'>
                                    </script>
                            </form> <!-- ================================================================== -->
                        </div>
                        <div class="row justify-content-center btnPago" style=" display: none; margin-top: 30px; ">
                            <form>
                                <div class="alert alert-primary" role="alert">
                                    Si deseas realizar tu pago a través de ePayco, presiona el siguiente botón.
                                </div>
                                <script src='https://checkout.epayco.co/checkout.js'
                                    data-epayco-key='7489c917b92e42864673157635bd7673' class='epayco-button'
                                    data-epayco-amount='10000' data-epayco-tax='0' data-epayco-tax-base='5000'
                                    data-epayco-name='Plan semilla 1M' data-epayco-description='Plan semilla 1M'
                                    data-epayco-currency='cop' data-epayco-country='CO' data-epayco-test='true'
                                    data-epayco-external='false'
                                    data-epayco-response='http://127.0.0.1:5500/financemarketscapital/index.html'
                                    data-epayco-confirmation='http://127.0.0.1:5500/financemarketscapital/index.html'
                                    data-epayco-button='https://369969691f476073508a-60bf0867add971908d4f26a64519c2aa.ssl.cf5.rackcdn.com/btns/btn1.png'>
                                    </script>
                            </form> <!-- ================================================================== -->
                        </div>
                        <div class="row justify-content-center btnPago" style=" display: none; margin-top: 30px; ">
                            <form>
                                <div class="alert alert-primary" role="alert">
                                    Si deseas realizar tu pago a través de ePayco, presiona el siguiente botón.
                                </div>
                                <script src='https://checkout.epayco.co/checkout.js'
                                    data-epayco-key='7489c917b92e42864673157635bd7673' class='epayco-button'
                                    data-epayco-amount='10000' data-epayco-tax='0' data-epayco-tax-base='5000'
                                    data-epayco-name='Plan semilla 1M' data-epayco-description='Plan semilla 1M'
                                    data-epayco-currency='cop' data-epayco-country='CO' data-epayco-test='true'
                                    data-epayco-external='false'
                                    data-epayco-response='http://127.0.0.1:5500/financemarketscapital/index.html'
                                    data-epayco-confirmation='http://127.0.0.1:5500/financemarketscapital/index.html'
                                    data-epayco-button='https://369969691f476073508a-60bf0867add971908d4f26a64519c2aa.ssl.cf5.rackcdn.com/btns/btn1.png'>
                                    </script>
                            </form> <!-- ================================================================== -->
                        </div>
                        <div class="row justify-content-center btnPago" style=" display: none; margin-top: 30px; ">
                            <form>
                                <div class="alert alert-primary" role="alert">
                                    Si deseas realizar tu pago a través de ePayco, presiona el siguiente botón.
                                </div>
                                <script src='https://checkout.epayco.co/checkout.js'
                                    data-epayco-key='7489c917b92e42864673157635bd7673' class='epayco-button'
                                    data-epayco-amount='10000' data-epayco-tax='0' data-epayco-tax-base='5000'
                                    data-epayco-name='Plan semilla 1M' data-epayco-description='Plan semilla 1M'
                                    data-epayco-currency='cop' data-epayco-country='CO' data-epayco-test='true'
                                    data-epayco-external='false'
                                    data-epayco-response='http://127.0.0.1:5500/financemarketscapital/index.html'
                                    data-epayco-confirmation='http://127.0.0.1:5500/financemarketscapital/index.html'
                                    data-epayco-button='https://369969691f476073508a-60bf0867add971908d4f26a64519c2aa.ssl.cf5.rackcdn.com/btns/btn1.png'>
                                    </script>
                            </form> <!-- ================================================================== -->
                        </div>

                    </div>
                </div>
            </div>
            <div class="tab-pane fade" id="uploadfileLink" role="tabpanel" aria-labelledby="uploadfileLink-tab">
                <div class="row justify-content-center" style="margin: 15px;">
                    <div class="card text-center">
                        <div class="card-header">
                            Subir Recibo de Pago
                        </div>
                        <div class="card-body">
                            <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-12">
                                <div class="input-group mb-3 justify-content-center">
                                    <input type="text" placeholder="Numero de Documento" class="form-control"
                                        id="inputFileNumDocumento" required>
                                </div>
                            </div>
                            <div class="col col-md-12 col-12 col-sm-12 col-lg-12 col-xl-12">
                                <div class="input-group mb-3 ">
                                    <div class="custom-file justify-content-center" lang="es">
                                        <div class="invoiceBox ">
                                            <label for="imageFileArchivo">
                                                <div class="boxFile uploadRecibo" data-text="Seleccionar archivo">
                                                    Seleccionar archivo
                                                </div>
                                            </label>
                                            <input id="imageFileArchivo" multiple="" name="invoice[]" size="6000"
                                                type="file"
                                                accept="application/pdf,image/x-png,image/gif,image/jpeg,image/jpg,image/tiff">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <button type="button" class="btn btn-primary" id="btnFileSave">Guardar Cambios</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">...</div>
        </div>
    </div>

</body>

<script src="https://www.gstatic.com/firebasejs/8.0.2/firebase-app.js"></script>

<script src="https://www.gstatic.com/firebasejs/8.0.2/firebase-analytics.js"></script>

<script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-firestore.js"></script>

<script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-storage.js"></script>

<script src="https://www.gstatic.com/firebasejs/7.23.0/firebase-database.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.16/vue.min.js">
</script>

<script src="https://cdn.emailjs.com/dist/email.min.js" type="text/javascript">
</script>

<script>
    var firebaseConfig = {
        apiKey: "AIzaSyCPvLMdAYWqdYLAZK28AbBa56mIAo1JkxU",
        authDomain: "appfinancemarketscapital.firebaseapp.com",
        databaseURL: "https://appfinancemarketscapital.firebaseio.com",
        projectId: "appfinancemarketscapital",
        storageBucket: "gs://appfinancemarketscapital.appspot.com",
        messagingSenderId: "327823603780",
        appId: "1:327823603780:web:506199709abac99322a411",
        measurementId: "G-3V5TM2M89C"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();
    const db = firebase.firestore();
    const dbStorage = firebase.storage().ref();

    const registerFrom = document.getElementById('registerForm');
    const existData = document.getElementById('inputExistData');
    const btnUserCheck = document.getElementById('btnUserCheck');
    const selectRepresentante = document.getElementById('selectRepresentante');
    const btnVerifyEmail = document.getElementById('btnVerifyEmail');
    const btnFileSave = document.getElementById('btnFileSave');
    const selectPlazo = document.getElementById('inputGroupPlazo');
    const selectPlan = document.getElementById('inputGroupPlan');
    const inputFileNumDocumento = document.getElementById('inputFileNumDocumento');
    const divBtnPago = document.getElementById('btnPago');
    const btnSubmit = document.getElementById('btnSubmit2');
    const divErrors = document.getElementById('errors');
    const divError = document.getElementById('error');
    const selectDepartamento = document.getElementById('inputState');
    const selectCiudad = document.getElementById('inputCity');
    const divCheckUser = document.getElementsByClassName("user")[1];
    const inputUser = document.getElementsByClassName("user")[0];
    //const divChecksponsor = document.getElementsByClassName("sponsor")[1];
    //const inputsponsor = document.getElementsByClassName("sponsor")[0];

    let key = ''; //llave con la que se busca el registro
    let data = ''; // dato con la que se busca el registro
    let exist = ''; // determina si el registro existe
    let datos = ''; //Almacena la respuesta de la busqueda
    let numVerify; // numero de verificacion de email
    let plazo; // plazo del plan
    let plan;
    let filtro; // Filtro del plan
    let existUser = false;
    //let existSponsor = false;
    let correoVerificado = false;
    let verifyToken = false;
    let errs = []; // array de errores
    let registrar = false;
    let dat;
    let numDoc = false;
    const getUsers = () => db.collection('Users').get();
    const getUserRepre = (callback) => db.collection("Users").where("rol", "==", "representante").onSnapshot(callback);;
    const planes = (callback) => db.collection('Planes').doc('5popKkRNj8G6bnFLxF7m').collection(plazo).orderBy(filtro, "asc").onSnapshot(callback);
    const updatePagoPlan = (id, updatePago) => db.collection('PlanesUsuarios').doc(id).update(updatePago);
    const updateUser = (id, updateUser) => db.collection('Users').doc(id).update(updateUser);
    const numRandom = () => Math.floor(Math.random() * (1000000 - 100000)) + 100000;

    $(document).ready(function () {
        registerFrom['inputVerifyEmail'].disabled = true;
        btnVerifyEmail.disabled = true;
        divErrors.style.display = "none";

        //mostrar Representantes
        getUserRepre((querySnapshot) => {
            selectRepresentante.innerHTML = '<option value="">Representante</option>'
            querySnapshot.forEach(repre => {
                rep = repre.data();
                selectRepresentante.innerHTML += '<option value="' + rep['usuario'] + '">' + rep['nombre'] + ' ' + rep['apellido'] + '</option>'
            });
        });

        //btnPagoForm.style.display = "none";
        //llave publica del comercio
        //Referencia de payco que viene por url
        var ref_payco = getQueryParam('ref_payco');
        //Url Rest Metodo get, se pasa la llave y la ref_payco como paremetro
        var urlapp = 'https://secure.epayco.co/validation/v1/reference/' + ref_payco;
        $.get(urlapp, function (response) {
            if (response.success) {
                if (response.data.x_cod_response == 1) {
                    //Codigo personalizado
                    alert('Transaccion Aprobada');
                    location.href = "https://financemarketscapital.com/register/";
                    //console.log('transacción aceptada');

                } //Transaccion Rechazada
                if (response.data.x_cod_response == 2) {
                    ///console.log('transacción rechazada');
                    location.href = "https://financemarketscapital.com/register/";
                }
                //Transaccion Pendiente
                if (response.data.x_cod_response == 3) {
                    location.href = "https://financemarketscapital.com/register/";
                    //console.log('transacción pendiente');
                }
                //Transaccion Fallida
                if (response.data.x_cod_response == 4) {
                    location.href = "https://financemarketscapital.com/register/";
                    //console.log('transacción fallida');
                }
                //$('#fecha').html(response.data.x_transaction_date);
                //$('#respuesta').html(response.data.x_response);
                //$('#referencia').text(response.data.x_id_invoice);
                //$('#motivo').text(response.data.x_response_reason_text);
                //$('#recibo').text(response.data.x_transaction_id);
                //$('#banco').text(response.data.x_bank_name);
                //$('#autorizacion').text(response.data.x_approval_code);
                //$('#total').text(response.data.x_amount + ' ' + response.data.x_currency_code);
                //console.log(response.data);
                db.collection("PlanesUsuarios").where('numerodocumento', "==", sessionStorage.getItem('NumDoc'))
                    .get()
                    .then(function (querySnapshot) {
                        querySnapshot.forEach(function (doc) {
                            datos = doc.data();
                            updatePagoPlan(doc.id, {
                                fechaPago: response.data.x_transaction_date,
                                recibo: response.data.x_transaction_id,
                                referencia: response.data.x_id_invoice,
                                estadoPago: response.data.x_response

                            });
                        });
                    })
                    .catch(function (error) {
                        console.log("Error getting documents: ", error);
                    });
                db.collection("Users").where('numerodocumento', "==", sessionStorage.getItem('NumDoc'))
                    .get()
                    .then(function (querySnapshot) {
                        querySnapshot.forEach(function (user) {
                            datos = user.data();
                            updateUser(user.id, {
                                rol: 'inversionista'
                            });
                        });
                    })
                    .catch(function (error) {
                        console.log("Error getting documents: ", error);
                    });
            } else {
                //alert('Error consultando la información');
            }
        });
    });
    // Funcion para comprobar que los datos existan en la BD
    function dataExist(key, data) {
        db.collection("Users").where(key, "==", data)
            .get()
            .then(function (querySnapshot) {
                querySnapshot.forEach(function (doc) {
                    datos = doc.data();
                    existData.value = datos[key]; // los datos se guardan en un input para verificar que existan
                });
            })
            .catch(function (error) {
                console.log("Error getting documents: ", error);
            });
        setTimeout(waitDatos, 1000);
    }
    // Esperar que la busqueda de datos termine
    function waitDatos() {
        existData.value == '' ? exist = false : exist = true;
    }
    // guardar usuarios
    function saveDateUser(usuario, patrocinador, nombre, apellido, tipodocumento, numerodocumento, fecha_nac, genero, correo, password, pais, departamento, ciudad, direccion, numero, entidadFinanciera, tipocuenta, numCuenta, estado, fechaRegistro, fechaMod, rol) {
        db.collection('Users').doc().set({ usuario, patrocinador, nombre, apellido, tipodocumento, numerodocumento, fecha_nac, genero, correo, password, pais, departamento, ciudad, direccion, numero, entidadFinanciera, tipocuenta, numCuenta, estado, fechaRegistro, fechaMod, rol });
    }
    // guardar informacion del pago
    function savePagoUser(numerodocumento, termino, plan, estado, referencia, fechaPago, recibo, estadoPago) {
        db.collection('PlanesUsuarios').doc().set({ numerodocumento, termino, plan, referencia, fechaPago, recibo, estadoPago });
    }
    // esperar a que exista la confirmacion de si existe el usuario
    function waitUser() {
        existUser = !exist;
        if (existUser) {
            inputUser.className = '';
            divCheckUser.className = '';
            divCheckUser.innerHTML = '';
            inputUser.className += 'form-control is-valid user';
            divCheckUser.className += 'user valid-feedback';
            divCheckUser.innerHTML += '<p>Este usuario esta disponible</p>';
        } else {
            inputUser.className = '';
            divCheckUser.className = '';
            divCheckUser.innerHTML = '';
            inputUser.className += 'form-control is-invalid user';
            divCheckUser.className += 'user invalid-feedback';
            divCheckUser.innerHTML += '<p>Escoge otro nombre de usuario</p>';
        }
        existData.value = '';
        exist = '';
        datos = '';
    }

    function exitsNumDoc() {
        db.collection("Users").where("numerodocumento", "==", registerFrom['inputNumDocumento'].value)
            .get()
            .then(function (querySnapshot) {
                querySnapshot.forEach(function (doc) {
                    numDoc = true; // los datos se guardan en un input para verificar que existan
                });
            })
            .catch(function (error) {
                console.log("Error getting documents: ", error);
            });
        setTimeout(function () {
            if (numDoc) {
                errs.push("El numero de documento ya fue ingresado");
            }
            numDoc = false;
        }, 2000);
    }

    function confirPassword() {
        if (registerFrom['inputPassword'].value == registerFrom['inputConfirmPassword'].value) {
            return true;
        } else {
            return false;
        }
    }

    function hashPassword() {
        let passwordHash = CryptoJS.SHA256(registerFrom['inputPassword'].value);
        return passwordHash.toString(CryptoJS.enc.Base64);
    }

    function verifyErrors() {
        let registrar;
        errs = [];
        //if (!existSponsor) {
        //    errs.push('No se ha verificado el Patrocinador');
        //}
        if (!existUser) {
            errs.push('No se ha verificado el Usuario');
        }
        if (!correoVerificado) {
            errs.push('No se ha verificado el Correo');
        }
        if (!verifyToken) {
            errs.push('No se ha verificado el Token');
        }
        if (!registerFrom['customCheckPP'].checked) {
            errs.push('No has aceptado las politicas de privacidad');
        }
        if (!registerFrom['customCheckAuthData'].checked) {
            errs.push('No has autorizado el tratamiento de tus datos');
        }
        if (!registerFrom['customCheckTYC'].checked) {
            errs.push('No has aceptado los terminos y condiciones');
        }
        if (!confirPassword()) {
            errs.push('Las contraseñas no coinciden');
        }
        if (!/[a-z]/.test(registerFrom['inputPassword'].value)) {
            errs.push(' La contraseña no contiene minúsculas');
        }
        if (!/[A-Z]/.test(registerFrom['inputPassword'].value)) {
            errs.push('La contraseña no contiene mayúsculas');
        }
        if (!/[0-9]/.test(registerFrom['inputPassword'].value)) {
            errs.push('La contraseña no contiene dígitos');
        }
        if (registerFrom['inputPassword'].value.length < 8) {
            errs.push('La contraseña tiene menos de 8 caracteres');
        }
        errs.length == 0 ? registrar = true : registrar = false;
        return registrar
    }

    function writeErrors() {
        errs.forEach(err => {
            divError.innerHTML += '<p>' + err + '</p>';
            divErrors.style.display = "block";
        });

    }

    function getUrlImage(nameImage) {

        //loadImage('imagenes/', nameImage, 'imageCedula');

        setTimeout(function () {
            $.ajax({
                url: "https://firebasestorage.googleapis.com/v0/b/appfinancemarketscapital.appspot.com/o/imagenes%2F" + nameImage,
                type: "GET"
            }).done(function (data) {
                token = data.downloadTokens;
            });
            urli = "https://firebasestorage.googleapis.com/v0/b/appfinancemarketscapital.appspot.com/o/imagenes%2F" + nameImage + "?alt=media&token" + token;
            console.log(urli);
        }, 3000);
    }

    function getQueryParam(param) {
        location.search.substr(1)
            .split('&')
            .some(function (item) { // returns first occurence and stops
                return item.split('=')[0] == param && (param = item.split('=')[1])
            })
        return param
    }

    function getDate() {
        var currentdate = new Date();
        var datetime = currentdate.getDate() + "/"
            + (currentdate.getMonth() + 1) + "/"
            + currentdate.getFullYear() + " @ "
            + currentdate.getHours() + ":"
            + currentdate.getMinutes() + ":"
            + currentdate.getSeconds();
        return datetime;
    }
    //Botenes con estilo para subir archivos
    document.querySelector('#imageFileArchivo').addEventListener('change', function (e) {
        var boxFile = document.querySelector('.uploadRecibo');
        boxFile.classList.remove('attached');
        boxFile.innerHTML = boxFile.getAttribute("data-text");
        if (this.value != '') {
            var allowedExtensions = /(\.jpg|\.jpeg|\.png)$/i;
            if (allowedExtensions.exec(this.value)) {
                boxFile.innerHTML = e.target.files[0].name;
                boxFile.classList.add('attached');
            } else {
                this.value = '';
                alert('El archivo que intentas subir a Cédula no está permitido.\nLos archivos permitidos son .jpg, .jpeg, .png');
                boxFile.classList.remove('attached');
            }
        }
    });

    document.querySelector('#imageCedula').addEventListener('change', function (e) {
        var boxFile = document.querySelector('.cedula');
        boxFile.classList.remove('attached');
        boxFile.innerHTML = boxFile.getAttribute("data-text");
        if (this.value != '') {
            var allowedExtensions = /(\.jpg|\.jpeg|\.png)$/i;
            if (allowedExtensions.exec(this.value)) {
                boxFile.innerHTML = e.target.files[0].name;
                boxFile.classList.add('attached');
            } else {
                this.value = '';
                alert('El archivo que intentas subir a Cédula no está permitido.\nLos archivos permitidos son .jpg, .jpeg, .png');
                boxFile.classList.remove('attached');
            }
        }
    });

    document.querySelector('#imageRespaldoCedula').addEventListener('change', function (e) {
        var boxFile = document.querySelector('.RCedula');
        boxFile.classList.remove('attached');
        boxFile.innerHTML = boxFile.getAttribute("data-text");
        if (this.value != '') {
            var allowedExtensions = /(\.jpg|\.jpeg|\.png)$/i;
            if (allowedExtensions.exec(this.value)) {
                boxFile.innerHTML = e.target.files[0].name;
                boxFile.classList.add('attached');
            } else {
                this.value = '';
                alert('El archivo que intentas subir a Respaldo de Cédula no está permitido.\nLos archivos permitidos son .jpg, .jpeg, .png');
                boxFile.classList.remove('attached');
            }
        }
    });

    document.querySelector('#imageSelfiDocumento').addEventListener('change', function (e) {
        var boxFile = document.querySelector('.selfie');
        boxFile.classList.remove('attached');
        boxFile.innerHTML = boxFile.getAttribute("data-text");
        if (this.value != '') {
            var allowedExtensions = /(\.jpg|\.jpeg|\.png)$/i;
            if (allowedExtensions.exec(this.value)) {
                boxFile.innerHTML = e.target.files[0].name;
                boxFile.classList.add('attached');
            } else {
                this.value = '';
                alert('El archivo que intentas subir a Selfie con Documento no está permitido.\nLos archivos permitidos son .jpg, .jpeg, .png');
                boxFile.classList.remove('attached');
            }
        }
    });

    document.querySelector('#imageRecibo').addEventListener('change', function (e) {
        var boxFile = document.querySelector('.recibo');
        boxFile.classList.remove('attached');
        boxFile.innerHTML = boxFile.getAttribute("data-text");
        if (this.value != '') {
            var allowedExtensions = /(\.jpg|\.jpeg|\.png)$/i;
            if (allowedExtensions.exec(this.value)) {
                boxFile.innerHTML = e.target.files[0].name;
                boxFile.classList.add('attached');
            } else {
                this.value = '';
                alert('El archivo que intentas subir a Recibo no está permitido.\nLos archivos permitidos son .jpg, .jpeg, .png');
                boxFile.classList.remove('attached');
            }
        }
    });
    //confirmar si el usuario existe
    btnUserCheck.addEventListener('click', async (e) => {
        await dataExist("usuario", registerFrom['inputUser'].value);
        setTimeout(waitUser, 2000);
    });
    //verificar el email
    btnVerifyEmail.addEventListener('click', (e) => {
        if (numVerify == registerFrom['inputVerifyEmail'].value) {
            alert('los numeros coinciden');
            registerFrom['inputVerifyEmail'].disabled = true;
            btnVerifyEmail.disabled = true;
            verifyToken = true;
        } else {
            alert('los numeros no coinciden');
            verifyToken = false;
        }
    });

    btnFileSave.addEventListener('click', (e) => {
        let existNum = false;
        if (inputFileNumDocumento.value == '') {
            alert('Debe ingresar un numero de documento');
        } else {
            db.collection("Users").where('numerodocumento', "==", inputFileNumDocumento.value)
                .get()
                .then(function (querySnapshot) {
                    querySnapshot.forEach(function (doc) {
                        existNum = true;
                    });
                })
                .catch(function (error) {
                    console.log("Error getting documents: ", error);
                });
            setTimeout(function () {
                if (!existNum) {
                    alert('El numero de documento no se encuentra registrado');
                } else {
                    loadImage('imagenes/', 'recibo' + inputFileNumDocumento.value, 'imageFileArchivo');
                    alert('El archivo se ha subido');
                    location.reload();
                }
            }, 2000);

        }

    });

    //seleccionar el plan de acuerdo al plazo que hay
    selectPlazo.addEventListener('change', async (e) => {
        plazo = registerFrom['inputGroupPlazo'].value;
        if (plazo == 'Largo Plazo') {
            filtro = "meses";
        } else {
            filtro = "porcentaje";
        }
        selectPlan.innerHTML = '<option selected>Escoger...</option>';
        await planes((querySnapshot) => {
            querySnapshot.forEach(doc => {
                plan = doc.data();
                selectPlan.innerHTML += '<option value="' + plan['nombre'] + '">' + plan['nombre'] + '</option>'
            });
        });
    });

    selectPlan.addEventListener('change', (e) => {
        db.collection('Planes').doc('5popKkRNj8G6bnFLxF7m').collection(plazo).where("nombre", "==", selectPlan.value)
            .get()
            .then(function (querySnapshot) {
                querySnapshot.forEach(function (doc) {
                    dat = doc.data();
                    divBtnPago.innerHTML = '';
                    divBtnPago.innerHTML += '<div class="row justify-content-center"><div class="col">' +
                        '<div class="alert alert-success" role="alert" >' +
                        '<h4 class="alert-heading">Plan a ' + plazo + '</h4>' +
                        '<p>Estas a punto de adquirir un ' + dat['nombre'] + ' a ' + plazo + ', el porcentaje de ganacia es ' + dat['porcentaje'] + '% al mes y una permanencia de ' + dat['retiro'] + '. Una vez envíe su documentación realizaremos un diagnóstico financiero y de riesgo y  en un plazo de 72 horas hábiles se le enviará un correo electrónico con las indicaciones para continuar con el proceso.</p></div></div></div>'
                    ' <hr>';
                });
            })
            .catch(function (error) {
                console.log("Error getting documents: ", error);
            });

    });
    //seleccionar la ciudad de acuerdo al departamento escogido
    selectDepartamento.addEventListener('change', async (e) => {
        let state = registerFrom['inputState'].value;
        var starCountRef = firebase.database().ref('/DepartamentosyCiudades/').orderByChild('MUNICIPIO');;
        if (state == "") {
            selectCiudad.innerHTML = '<option value="">Ciudad</option>';
        } else {
            selectCiudad.innerHTML = '<option value="">Ciudad</option>';
            starCountRef.on('value', function (snapshot) {
                snapshot.forEach(doc => {
                    ciudades = doc.val();
                    if (ciudades['Departamento'] == state) {
                        selectCiudad.innerHTML += '<option value="' + ciudades['MUNICIPIO'] + '">' + ciudades['MUNICIPIO'] + '</option>';
                    }
                });
        })
        }
    });


    registerFrom.addEventListener('submit', async (e) => {
        e.preventDefault();
        exitsNumDoc();
        let enviar = verifyErrors(); //retorna verdadero si existen errores
        divError.innerHTML = '';
        divErrors.style.display = "none";
        setTimeout(function () {
            if (!enviar) {
                writeErrors();
            } else {
                let existUser = false;
                //let existSponsor = false;
                let correoVerificado = false;
                let verifyToken = false;
                let errs = [];
                let registrar = false;
                waitUser();
                let usuario = registerFrom['inputUser'].value;
                let patrocinador = registerFrom['selectRepresentante'].value;
                let nombre = registerFrom['inputName'].value;
                let apellido = registerFrom['inputLastName'].value;
                let tipodocumento = registerFrom['inputGroupTDocumento'].value;
                let numerodocumento = registerFrom['inputNumDocumento'].value;
                let fecha_nac = registerFrom['inputDay'].value + '/' + registerFrom['inputMes'].value + '/' + registerFrom['inputYear'].value;
                let genero = registerFrom['inputGroupGender'].value;
                let correo = registerFrom['inputEmail'].value;
                let password = hashPassword();
                let pais = "Colombia";
                let departamento = registerFrom['inputState'].value;
                let ciudad = registerFrom['inputCity'].value;
                let direccion = registerFrom['inputDireccion'].value;
                let numero = "+57 " + registerFrom['inputNumber'].value;
                let entidadFinanciera = registerFrom['inputNomEntidad'].value;
                let tipocuenta = registerFrom['inputGroupTCuenta'].value;
                let numCuenta = registerFrom['inputNumCuenta'].value;
                let termino = registerFrom['inputGroupPlazo'].value;
                let plan = registerFrom['inputGroupPlan'].value;
                let estado = true;
                let fechaRegistro = getDate();
                let fechaMod = getDate();
                let rol = 'usuario';
                sessionStorage.setItem("NumDoc", numerodocumento);
                loadImage('imagenes/', 'cedula' + numerodocumento, 'imageCedula');
                loadImage('imagenes/', 'Respaldocedula' + numerodocumento, 'imageRespaldoCedula');
                loadImage('imagenes/', 'selfi' + numerodocumento, 'imageSelfiDocumento');
                loadImage('imagenes/', 'recibo' + numerodocumento, 'imageRecibo');
                saveDateUser(usuario, patrocinador, nombre, apellido, tipodocumento, numerodocumento, fecha_nac, genero, correo, password, pais, departamento, ciudad, direccion, numero, entidadFinanciera, tipocuenta, numCuenta, estado, fechaRegistro, fechaMod, rol);
                savePagoUser(numerodocumento, plazo, dat['nombre'], "pendiente", "Pendiente", "Pendiente", "Pendiente", "Pendiente");
                alert('Se ha registrado correctamente');
                registerFrom.reset();
                registerFrom.style.display = "none";
                let numbtn = dat['btnmun'] - 1;
                let btnPagoForm = document.getElementsByClassName('btnPago')[numbtn];
                btnPagoForm.style.display = "block";
            }
        }, 3000)

    });

</script>

<script>
    (function () {
        emailjs.init("user_xGyquRr2kixs3CI4cNxlE");
    })();
    const vue = new Vue({
        el: '#app',
        data() {
            return {
                from_name: '',
                from_email: '',
                message: '',
                subject: '',
            }
        },
        methods: {
            async enviar() {

                numVerify = numRandom();
                let data = {
                    from_name: registerFrom['inputName'].value + ' ' + registerFrom['inputLastName'].value,
                    from_email: registerFrom['inputEmail'].value,
                    message: numVerify,
                    subject: "Verificacion de correo",
                };
                await dataExist("correo", registerFrom['inputEmail'].value);
                setTimeout(function () {
                    correoVerificado = exist;
                    if (correoVerificado) {
                        alert('El correo ingresado ya ha sido Registrado');
                        correoVerificado = false;
                        exist = false;
                    } else {
                        registerFrom['inputVerifyEmail'].disabled = false;
                        btnVerifyEmail.disabled = false;
                        emailjs.send("service_lfuv4wl", "template_r4f0yt6", data)//datos de el servidor de correo
                            .then(function (response) {
                                if (response.text === 'OK') {
                                    alert('El correo se ha enviado de forma exitosa');
                                    correoVerificado = true;
                                    exist = '';
                                }
                                console.log("SUCCESS. status=%d, text=%s", response.status, response.text);
                            }, function (err) {
                                alert('Ocurrió un problema al enviar el correo');
                                console.log("FAILED. error=", err);
                            });
                    }
                    existData.value = '';
                    exist = '';
                    datos = '';
                }, 4000);


            }
        }
    });
</script>

<script>

    let inputFile = document.getElementById('btnPrueba');
    let url;
    let fileList;
    let loadImages;


    inputFile.addEventListener('click', (e) => {
    });

    //funcion para cargar imagenes a la BD
    function loadImage(ubicacion, name, inputImage) {
        let inputFile = document.getElementById(inputImage);
        fileList = inputFile.files[0];
        loadImages = dbStorage.child(ubicacion + name).put(fileList);
        loadImages.on('state_changed', function (snapshot) {
            var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
            console.log('Upload is ' + progress + '% done');
            switch (snapshot.state) {
                case firebase.storage.TaskState.PAUSED: // or 'paused'
                    //console.log('Upload is paused');
                    break;
                case firebase.storage.TaskState.RUNNING: // or 'running'
                    //console.log('Upload is running');
                    break;
            }
        }, function (error) {
        }, function () {
            loadImages.snapshot.ref.getDownloadURL().then(function (downloadURL) {
                //console.log(downloadURL);
            });
        });
    }


</script>

</html>